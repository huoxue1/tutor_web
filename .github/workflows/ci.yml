name: CI

on: [push, pull_request]

jobs:
  build:
    name: Build binary CI
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '14'
          cache: 'npm'
      - name: Build binary file
        run: |
          npm install && npm run build
      - name: Commit to page
        continue-on-error: true
        run: |
            cd dist
            git config --local user.name 'github-actions[bot]'
            git config --local user.email '41898282+github-actions[bot]@users.noreply.github.com'
            git init
            git remote add origin git@github.com:huoxue1/tutor_web.git
            git checkout -b page
            git add --all
            git commit -m "🎨 改进代码样式"
            git push -u origin page
